# Beam envelope simulation.

sim_type = "MomentMatrix";

# Global parameters.

# Mpultipole level: 0 only include focusing and defocusing effects,
#                   1 include dipole terms,
#                   2 include quadrupole terms.
MpoleLevel = "2";

# Include emittance growth from RF Cavity.
EmitGrowth = "1";

# Dipole strength adjusted to beam energy.
HdipoleFitMode = "1";

AMU   = 931.49432e6;   # Atomic mass unit [eV/c^2].

IonEs = AMU;           # Nucleon mass [eV/u].
IonEk = 1.67453e+07;         # Kinetic energy at LS1 entrance [eV/u].

# Define Initial Conditions for the Charge States.
# Units are: [mm, rad, mm, rad, rad, MeV/u]

IonChargeStates = [33.0/238.0];
NCharge         = [10111.0];

BaryCenter0 = [0.1660505098,-0.000124619965965,0.241490866509,1.00640626486e-05,-0.00245003767762,0.000712907526866,1.0];

# Define beam envelope parameters.

S0 = [
  	 1.379713224956747197e+00,-6.841391383418459577e-04,2.054198995890890445e-01,-7.982098313108206922e-05,-4.415684050022757328e-04,2.091901882323829356e-04,0.000000000000000000e+00,
	-6.841391383418459577e-04,5.789038331907911107e-07,-1.479184974397744598e-04,2.687844681768306779e-08,4.269070322885964429e-07,-1.319554039089439871e-07,0.000000000000000000e+00,
	2.054198995890890445e-01,-1.479184974397744598e-04,1.911737871118114107e+00,-3.800977269040653993e-04,-3.022370312657520451e-05,-3.728169454699177597e-05,0.000000000000000000e+00,
	-7.982098313108206922e-05,2.687844681768306779e-08,-3.800977269040653993e-04,2.496662913903459525e-07,2.799143122619328103e-07,3.455011834529067765e-08,0.000000000000000000e+00,
	-4.415684050022757328e-04,4.269070322885964429e-07,-3.022370312657520451e-05,2.799143122619328103e-07,3.368771960216094467e-04,-6.413680466955861618e-05,0.000000000000000000e+00,
	2.091901882323829356e-04,-1.319554039089439871e-07,-3.728169454699177597e-05,3.455011834529067765e-08,-6.413680466955861618e-05,1.645564516738765785e-05,0.000000000000000000e+00,
	0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00
];

S: source, vector_variable="BaryCenter", matrix_variable = "S";

Eng_Data_Dir = dir("data");

drift_1: drift, L = 0.2/10, aper = 0.020000;
RT7greb: rfcavity, cavtype = "Generic", datafile = "thinlenlon_7g.lat", L = 1.14, f = 161.000000e6, phi = -90.000000, scl_fac = 1.0000, aper = 0.014000;

cell: LINE=(S, drift_1*10, RT7greb, drift_1*30);

USE: cell;
